---
title: S5PV210加载u-boot过程
date: 2016-03-30 13:00:42
category: Linux内核
tags: Linux
---

这里只对整体的加载逻辑进行梳理，不作详细说明，学习过程主要参考《嵌入式Linux学习笔记（基于S5PV210、TQ210）》。

上电后最先运行的时iRom中的代码（ BL0, 由三星固化，不能修改，别人能不能改不一定闭嘴） 会根据OM引脚配置选择一种启动方式， 主要用到sd卡启动和Nandflash启动，UART和USB启动没有测试过。对于没有代码的板子，使用SD启动，SD中存放的当然就是u-boot了，启动u-boot后，通过tftp 或者 其它方式将uboot将u-boot代码写入到nand中。 此时更改OM配置就能从Nand中启动了，不再使用SD卡。

对于iRom加载的代码（BL1, 存放在SD卡或Nand中），有格式要求，不然处理器也不知道加载多长的代码。这个代码必须以一个特定的数据头开始，且长度不超过16K，处理器会根据数据头读取实际的代码长度。当启动方式为SD里，这段代码的必须从SD卡的512B的位置开始存放，这是处理器的规定，在Nand中时，则是从0位置开始。

因为u-boot的代码超过了16k，所以u-boot只能分成两段加载，16K代码里必须初始化SDRAM，然后将另一段u-boot代码（BL2）加载到SDRAM中运行。